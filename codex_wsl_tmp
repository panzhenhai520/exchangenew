#!/bin/sh
basedir=$(dirname "$(echo "$0" | sed -e 's,\\,/,g')")

# Ensure Windows node.exe bundled with Codex receives Windows-style paths under WSL
if [ -n "$WSL_DISTRO_NAME" ] && command -v wslpath >/dev/null 2>&1; then
    wbasedir=$(wslpath -w "$basedir" 2>/dev/null)
    if [ -n "$wbasedir" ]; then
        basedir="$wbasedir"
    fi
fi

case `uname` in
    *CYGWIN*|*MINGW*|*MSYS*)
        if command -v cygpath > /dev/null 2>&1; then
            basedir=`cygpath -w "$basedir"`
        fi
    ;;
esac

if [ -x "$basedir/node" ]; then
  exec "$basedir/node"  "$basedir/node_modules/@openai/codex/bin/codex.js" "$@"
else 
  exec node  "$basedir/node_modules/@openai/codex/bin/codex.js" "$@"
fi
