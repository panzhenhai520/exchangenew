<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯­éŸ³åŠŸèƒ½ç®€å•æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
            width: 100%;
        }
        button:hover {
            background-color: #0056b3;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”Š è¯­éŸ³åŠŸèƒ½æµ‹è¯•</h1>
        
        <div id="status" class="status info">
            æ­£åœ¨æ£€æŸ¥è¯­éŸ³åŠŸèƒ½æ”¯æŒ...
        </div>
        
        <button onclick="testChinese()">æµ‹è¯•ä¸­æ–‡è¯­éŸ³</button>
        <button onclick="testEnglish()">æµ‹è¯•è‹±æ–‡è¯­éŸ³</button>
        <button onclick="testThai()">æµ‹è¯•æ³°æ–‡è¯­éŸ³</button>
        <button onclick="checkVoices()">æ£€æŸ¥å¯ç”¨è¯­éŸ³</button>
    </div>

    <script>
        let speechSynthesis = null;
        let canSpeak = false;
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            initSpeechSynthesis();
        };
        
        function updateStatus(message, type = 'info') {
            const statusElement = document.getElementById('status');
            statusElement.textContent = message;
            statusElement.className = `status ${type}`;
        }
        
        function initSpeechSynthesis() {
            if ('speechSynthesis' in window) {
                speechSynthesis = window.speechSynthesis;
                
                if (speechSynthesis && typeof speechSynthesis.speak === 'function') {
                    canSpeak = true;
                    updateStatus('âœ… è¯­éŸ³åŠŸèƒ½å·²å¯ç”¨ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•', 'success');
                    
                    // è·å–è¯­éŸ³åˆ—è¡¨
                    const voices = speechSynthesis.getVoices();
                    console.log('å¯ç”¨è¯­éŸ³æ•°é‡:', voices.length);
                    
                    if (voices.length === 0) {
                        // ç­‰å¾…è¯­éŸ³åŠ è½½
                        speechSynthesis.onvoiceschanged = () => {
                            const loadedVoices = speechSynthesis.getVoices();
                            console.log('è¯­éŸ³åŠ è½½å®Œæˆï¼Œæ•°é‡:', loadedVoices.length);
                        };
                        speechSynthesis.getVoices();
                    }
                } else {
                    canSpeak = false;
                    updateStatus('âŒ è¯­éŸ³åˆæˆå¯¹è±¡ä¸å¯ç”¨', 'error');
                }
            } else {
                canSpeak = false;
                updateStatus('âŒ æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ', 'error');
            }
        }
        
        function testSpeech(text, lang = 'zh-CN') {
            if (!canSpeak) {
                updateStatus('âŒ è¯­éŸ³åŠŸèƒ½æœªå¯ç”¨', 'error');
                return;
            }
            
            try {
                speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance();
                utterance.text = text;
                utterance.lang = lang;
                utterance.rate = 0.8;
                utterance.pitch = 1;
                
                utterance.onstart = () => {
                    updateStatus('ğŸ”Š è¯­éŸ³æ’­æŠ¥å¼€å§‹...', 'success');
                };
                
                utterance.onend = () => {
                    updateStatus('âœ… è¯­éŸ³æ’­æŠ¥å®Œæˆ', 'success');
                };
                
                utterance.onerror = (event) => {
                    updateStatus(`âŒ è¯­éŸ³æ’­æŠ¥é”™è¯¯: ${event.error}`, 'error');
                    console.error('è¯­éŸ³é”™è¯¯:', event);
                };
                
                speechSynthesis.speak(utterance);
                
            } catch (error) {
                updateStatus(`âŒ è¯­éŸ³æ’­æŠ¥å¤±è´¥: ${error.message}`, 'error');
                console.error('è¯­éŸ³æ’­æŠ¥å¼‚å¸¸:', error);
            }
        }
        
        function testChinese() {
            testSpeech('æµ‹è¯•ä¸­æ–‡è¯­éŸ³æ’­æŠ¥åŠŸèƒ½ï¼Œå¦‚æœæ‚¨å¬åˆ°è¿™å¥è¯ï¼Œè¯´æ˜è¯­éŸ³åŠŸèƒ½æ­£å¸¸å·¥ä½œ');
        }
        
        function testEnglish() {
            testSpeech('Test English speech synthesis. If you can hear this, the speech function is working properly.', 'en-US');
        }
        
        function testThai() {
            testSpeech('à¸—à¸”à¸ªà¸­à¸šà¸à¸²à¸£à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ à¸«à¸²à¸à¸„à¸¸à¸“à¹„à¸”à¹‰à¸¢à¸´à¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸™à¸µà¹‰ à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸²à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸à¸²à¸£à¸à¸¹à¸”à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰à¸›à¸à¸•à¸´', 'th-TH');
        }
        
        function checkVoices() {
            if (!speechSynthesis) {
                updateStatus('âŒ è¯­éŸ³åˆæˆä¸å¯ç”¨', 'error');
                return;
            }
            
            const voices = speechSynthesis.getVoices();
            const supportedLanguages = [...new Set(voices.map(voice => voice.lang.split('-')[0]))];
            const chineseVoices = voices.filter(voice => voice.lang.startsWith('zh'));
            const englishVoices = voices.filter(voice => voice.lang.startsWith('en'));
            
            let message = `ğŸ”Š è¯­éŸ³ä¿¡æ¯:\n`;
            message += `æ€»æ•°é‡: ${voices.length}\n`;
            message += `æ”¯æŒè¯­è¨€: ${supportedLanguages.join(', ')}\n`;
            message += `ä¸­æ–‡è¯­éŸ³: ${chineseVoices.length} ä¸ª\n`;
            message += `è‹±æ–‡è¯­éŸ³: ${englishVoices.length} ä¸ª`;
            
            updateStatus(message, 'info');
            
            console.log('è¯­éŸ³è¯¦ç»†ä¿¡æ¯:', voices.map(v => ({
                name: v.name,
                lang: v.lang,
                localService: v.localService,
                default: v.default
            })));
        }
    </script>
</body>
</html> 